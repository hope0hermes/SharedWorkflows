# Reusable Create Release Workflow
#
# This workflow automatically creates a GitHub Release after a version bump PR is merged.
#
# Usage:
#   jobs:
#     create-release:
#       uses: hope0hermes/SharedWorkflows/.github/workflows/reusable-create-release.yml

name: Reusable Create Release

on:
  workflow_call:

jobs:
  create-release:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Checkout SharedWorkflows actions
        uses: actions/checkout@v4
        with:
          repository: hope0hermes/SharedWorkflows
          ref: main
          path: .github/actions-temp

      - name: Extract version from commit
        id: extract
        uses: .github/actions-temp/actions/extract-version

      - name: Create GitHub Release
        if: steps.extract.outputs.is_version_bump == 'true'
        uses: .github/actions-temp/actions/create-github-release
        with:
          version: ${{ steps.extract.outputs.version }}
          github-token: ${{ secrets.GITHUB_TOKEN }}
